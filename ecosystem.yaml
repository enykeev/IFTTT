apps:
  - name: 'Database migration'
    script: 'knex migrate:latest'
    autorestart: false
    watch: true
  - name: 'HTTP Sensor'
    script: 'src/components/sensor.js'
    instances: 1
    autorestart: true
    watch: true
    max_memory_restart: '1G'
    env:
      NODE_ENV: 'development'
    env_production:
      NODE_ENV: 'production'
  - name: 'Rule Engine'
    script: 'src/components/ruleengine.js'
    instances: 1
    autorestart: true
    watch: true
    max_memory_restart: '1G'
    env:
      NODE_ENV: 'development'
    env_production:
      NODE_ENV: 'production'
  - name: 'HTTP Action Runner'
    script: 'src/components/actionrunner.js'
    instances: 1
    autorestart: true
    watch: true
    max_memory_restart: '1G'
    env:
      NODE_ENV: 'development'
    env_production:
      NODE_ENV: 'production'
  - name: 'API Server'
    script: 'src/components/api.js'
    instances: 2
    autorestart: true
    watch: true
    max_memory_restart: '1G'
    env:
      NODE_ENV: 'development'
    env_production:
      NODE_ENV: 'production'
