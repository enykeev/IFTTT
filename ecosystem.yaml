apps:
  - name: migration
    script: npx
    args: knex migrate:latest
    autorestart: false
    watch:
      - migrations

  - name: webui
    script: dev.js
    autorestart: true
    watch:
      - dev.js

  - name: sensor_http
    script: src/components/sensor.js
    instances: 1
    autorestart: true
    restart_delay: 10000
    watch:
      - src
    max_memory_restart: 1G

  - name: ruleengine
    script: src/components/ruleengine.js
    instances: 1
    autorestart: true
    restart_delay: 10000
    watch:
      - src
    max_memory_restart: 1G

  - name: actionrunner_http
    script: src/components/actionrunner.js
    instances: 1
    autorestart: true
    restart_delay: 10000
    watch:
      - src
    max_memory_restart: 1G

  - name: api
    script: src/components/api.js
    instances: 2
    autorestart: true
    restart_delay: 10000
    watch:
      - src
    max_memory_restart: 1G
